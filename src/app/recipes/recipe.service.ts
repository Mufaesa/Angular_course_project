import { Injectable } from '@angular/core';
import { Recipe } from './recipe.model';
import { Subject } from 'rxjs/Subject';
import { Ingredient } from '../shared/ingredient.model';

@Injectable({
  providedIn: 'root'
})
export class RecipeService {
  recipesChanges = new Subject<Recipe[]>();

  private recipes: Recipe[] = [
    new Recipe(
      'Spaghet',
      'Spaghetti and meatballs', 
      'https://upload.wikimedia.org/wikipedia/commons/1/15/Recipe_logo.jpeg', 
      [
        new Ingredient('Spaghetti', 1),
        new Ingredient('Meatballs', 6),
        new Ingredient('Salt', 1),
        new Ingredient('Tomato', 2)
      ]),
    new Recipe(
      'Patatje pinda', 
      'Patat & een pinda', 
      'data:image/jpeg;base64,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', 
      [
        new Ingredient('Patatjes', 25),
        new Ingredient('Pindasaus', 1)
      ])
  ];

  constructor() { }

  getRecipes(){
    return this.recipes.slice();
  }

  getRecipe(index: number){
    return this.recipes[index];
  }

  addRecipe(recipe: Recipe){
    this.recipes.push(recipe);
    this.recipesChanges.next(this.recipes.slice());
  }
  
  updateRecipe(index: number, newRecipe: Recipe){
    this.recipes[index] = newRecipe;
    this.recipesChanges.next(this.recipes.slice());
  }

  deleteRecipe(index: number){
    this.recipes.splice(index, 1);
    this.recipesChanges.next(this.recipes.slice());
  }
}
